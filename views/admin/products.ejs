<%- include('../layouts/header.ejs') %>
<%- include('../layouts/navbar.ejs') %>
<%- include('../layouts/sidebar.ejs') %>

<div class="main-panel">
  <div class="content-wrapper">
    <div class="row">
      <div class="col-lg-12 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">PRODUCT</h4>
            <div class="row justify-content-end">
              <div class="col-auto">
                <a href="/admin/addProducts"><button type="button" class="btn btn-primary">Add Product</button></a>
              </div>
            </div>                  
            <div class="table-responsive">
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th class="text-center">
                      No.
                    </th>
                    <th class="text-center">
                      Product Name
                    </th>
                    <th class="text-center">
                      Image
                    </th>
                    <th class="text-center">
                      Category
                    </th>
                    <th class="text-center">
                      Description
                    </th>
                    <th class="text-center">
                      Stock
                    </th>
                    <th class="text-center">
                      Price
                    </th>
                    <th class="text-center">
                      Action
                    </th>
                  </tr>
                </thead>
                <tbody class="text-center">
                  <% 
                  if(product.length>0){
                      for(let i=0; i <product.length ; i++){
                          %>
                          <tr  >
                              <td style="margin-top: 10px;"><%= i+1 %></td>
                              <td><span style="display: block;
                                width: 100%;
                                white-space: normal;
                                overflow: hidden;
                                text-overflow: ellipsis">   <%= product[i].name %> </span></td>
                            <!-- <div class="img-zoom-container">  -->
                            <td ><img id="myimage" style="width: 58px;height:58px" src="/productImages/<%=product[i].image[0]%>"></td>
                            <!-- <div id="myresult" class="img-zoom-result"></div> -->
                          <!-- </div>   -->
                          <td><%= product[i].category.name %></td>
                            <td><span style="display: block;
                            width: 100%;
                            white-space: normal;
                            overflow: hidden;
                            text-overflow: ellipsis"><%= product[i].description %></span></td>
                              <td><%= product[i].stock %></td>
                                  
                           
                             
                              <td>&#8377; <%= product[i].price %></td>
                              <td> 
                                <a href="/admin/editProduct?id=<%= product[i]._id %>" class="table-link text-info"><button type="button" class="btn btn-success btn-sm">edit</button></a>                  
                              
                              
                                <% if(product[i].status) {%>
    
                                    <a type="button" class="btn btn-danger btn-sm" href="/admin/productControl?id=<%=product[i]._id%>">Block</a>
                                  
                                  <% }else{%>
                                  
                                    <a type="button" class="btn btn-success btn-sm" href="/admin/productControl?id=<%=product[i]._id%>">UnBlock</a>
                                  </td>
                                  <% } %> 
                          </tr>
                          <%
                      }
                  }else{
                      %>
                      <tr> 
                      <td colspan = "5">Products Not Found </td>
                      </tr>
                      <%
                  }
              %>
        
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <%- include('../layouts/footer.ejs') %>
